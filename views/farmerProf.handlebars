<br>
<div class="container farmer-info-basic">
    <div class="vendor-profile-basic row">
        <div class="col s5">
            <div class="vendor-profile-basic-intro">
                <img id="vendorProfPhoto" class="vendor-profile-basic-intro-pic" src="http://www.yourdictionary.com/images/definitions/lg/4320.farmer.jpg" alt="profile-image"
                />
                <div class="vendor-profile-basic-name">
                    <h3 class="venName">Vendor Name</h3>
                </div>
            </div>
        </div>
        <div class="col s7">
            <div class="vendor-profile-basic-more">Bio
                <div class="vendor-profile-basic-about">
                    <p class="venBio">
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptatem libero fugit, pariatur maxime! Optio enim, deserunt
                        quia molestiae fugiat delectus, dolore et esse nostrum, quod autem necessitatibus fugit soluta repellendus.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- Product Section --->
    <div class="vendor-product row">
        <div class="col s7 current-product box">
            Products
            <div class="product-card">
                <div class="card-body">
                    <h6 class="venProduct">Sweet Potatoes. A lot of them.</h6>
                </div>
            </div>

        </div>
        <div class="col s1"></div>
        <div class="col s4 contact-info box">
            Contact info
            <div class="product-card">
                <div class="card-body">
                    Phone:
                    <h6 class="venPhone"> 777-777-7777</h6>
                    Email:
                    <h6 class="venEmail"> connorgreed@gmail.com</h6>
                    Address:
                    <h6 class="address"> </h6>
                    <!-- Modal Trigger -->
                    <button data-target="modal-contact" class="btn modal-trigger">Email Me!</button>
                    <h6 class="venAddress"> </h6>
                </div>
            </div>

        </div>
    </div>
    <div class="vendor-footer row">
        <div class="col-md-12">
            <footer>
                <button id="farmer-edit-btn" class="button button-rounded-hover">Edit Profile</button>
            </footer>
        </div>
    </div>
</div>



<!-- Contact Modal -->
<div id="modal-contact" class="modal">
    <div class="modal-content">
        <div class="col s12 m12 l6">
            <div class="card-panel">
                <h4 class="header2">Form with placeholder</h4>
                <div class="row">
                    <form class="col s12">
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="john@domainname.com" id="email2" type="email" name="fromEmail">
                                <label for="email">Email</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="In Search of Fresh Organic Food" id="subject" type="text" name="subject">
                                <label for="subject">Subject</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <textarea placeholder="Could I come by and pick up some food?" id="message2" class="materialize-textarea" name="message"></textarea>
                                <label for="message">Message</label>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <button class="btn cyan waves-effect waves-light right submitBtn" type="submit" name="action">Submit
                                        <i class="mdi-content-send right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    $(document).ready(function () {
        $('.modal').modal();
        $('input#input_text, textarea#textarea2').characterCounter();
        $("[data-menu-underline-from-center] a").addClass("underline-from-center");
    });
    $("[data-menu-underline-from-center] a").addClass("underline-from-center");

    $(document).ready(() => {
        firebase.auth().onAuthStateChanged( user => {
            displayVendor();
            displayVendorPic();
        });

        displayVendor = () => {
            let userId = firebase.auth().currentUser.uid;
            firebase.database().ref('users/' + userId).once('value', snap => {
                $('.venBio').text(snap.val().bio);
                $('.venName').text(snap.val().vendorName);
                $('.venProduct').text(snap.val().products);
                $('.venPhone').text(snap.val().phoneNum);
                $('.venEmail').text(snap.val().email);
                $('.venAddress').text(snap.val().address);
            });
        };

        displayVendorPic = () => {
            firebase.storage().ref('vendor_photo/' + firebase.auth().currentUser.uid).getDownloadURL().then(url => {
                console.log(url);

                // insert url into image src
                let img = document.getElementById('vendorProfPhoto');
                img.src = url;
            }).catch(function (error) {
                // Handle any errors
                console.log('Error: ', error);
            });
        }

       // Sendgrid ajax post
       $('.submitBtn').on('click', e => {
            e.preventDefault();

            let fromEmail = $('#email2').val().trim();
            let subject = $('#subject').val().trim();
            let message = $('#message2').val().trim();

            $.post('/api/mail', {
                fromEmail, 
                subject, 
                message
            }).then(cb => {
                $('#modal-contact').modal('close');
            });

       });
    });

</script>